var v=Object.defineProperty;var P=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var w=(h,t,i)=>t in h?v(h,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[t]=i,S=(h,t)=>{for(var i in t||(t={}))B.call(t,i)&&w(h,i,t[i]);if(P)for(var i of P(t))L.call(t,i)&&w(h,i,t[i]);return h};var s=(h,t,i)=>(w(h,typeof t!="symbol"?t+"":t,i),i);const F=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}};F();class A{constructor(t){s(this,"_container");s(this,"_canvas");s(this,"_context");s(this,"_width",0);s(this,"_height",0);s(this,"_time",0);s(this,"_elapsed",0);s(this,"_animationRequestId",0);s(this,"_updateBind");s(this,"_resizeBind");this._container=t;const i=this._container.getBoundingClientRect();this._width=Math.floor(i.width),this._height=Math.floor(i.height),this._canvas=document.createElement("canvas"),this._canvas.width=this._width,this._canvas.height=this._height;const e=this._canvas.getContext("2d");if(e)this._context=e;else throw"unable to get 2d context";this._container.appendChild(this._canvas),this._updateBind=this.update.bind(this),this._resizeBind=this.resize.bind(this),this._animationRequestId=requestAnimationFrame(this._updateBind),window.addEventListener("resize",this._resizeBind)}update(){const t=new Date().getTime();this._elapsed=(t-(this._time||t))/1e3,this._time=t,this._animationRequestId=requestAnimationFrame(this._updateBind),this.draw()}resize(){if(this._container!==void 0){const t=this._container.getBoundingClientRect(),i=Math.floor(t.width),e=Math.floor(t.height);this._width=i,this._height=e,this._canvas.width=i,this._canvas.height=e}}dispose(){cancelAnimationFrame(this._animationRequestId),window.removeEventListener("resize",this._resizeBind)}}const x=(h,t)=>{const i=t-h;return t===h?h:Math.random()*i+h};class z{constructor(){s(this,"bubbles",[]);s(this,"total",22);s(this,"averageSpeed",50);s(this,"speedDeviation",12);s(this,"current",0);s(this,"swing",0);s(this,"averageSize",4);s(this,"minX",0);s(this,"maxX",0);s(this,"minY",0);s(this,"maxY",0);s(this,"yThreshold",0)}getBubble(){const t=x(this.minX,this.maxX),i=x(this.minY,this.maxY),e=x(this.averageSize*.5,this.averageSize*1.5),r=e<this.averageSize?.5:1,o=x(this.averageSpeed-this.speedDeviation,this.averageSpeed+this.speedDeviation),l=(i-this.yThreshold)/o;return new M(t,i,e,o,l,r)}resetBubble(t){this.bubbles=this.bubbles.filter(i=>i!==t),this.bubbles.push(this.getBubble())}reset(){this.bubbles=[];for(let t=0;t<this.total;t++)this.bubbles.push(this.getBubble())}}class M{constructor(t,i,e,r,o,a=1){s(this,"x",0);s(this,"y",0);s(this,"r",0);s(this,"velY",0);s(this,"lifespan",0);s(this,"currentRadius",0);s(this,"currentLifespan",0);s(this,"opacityThreshold",0);s(this,"currentOpacity",1);s(this,"opacityDecayingSpeed",0);this.x=t,this.y=i,this.r=e,this.velY=r,this.lifespan=o,this.currentLifespan=o,this.currentOpacity=a,this.opacityThreshold=this.lifespan*.2,this.opacityDecayingSpeed=100/this.lifespan*.2}get isDead(){return this.currentLifespan<=0}update(t){this.y-=this.velY*t,this.currentRadius<this.r&&(this.currentRadius+=20*t),this.currentLifespan<this.opacityThreshold&&(this.currentOpacity-=this.opacityDecayingSpeed*t,this.currentOpacity<=0&&(this.currentOpacity=0)),this.currentLifespan-=t}}class m{static pSBC(t,i,e=null,r=null){let o,a,l,c,n,d=typeof e=="string",g,_;const f=Math.round;return o=i.length>9,o=d?e.length>9?!0:e=="c"?!o:!1:o,_=this.pSBCr(i),g=t<0,n=e&&e!="c"?this.pSBCr(e):g?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},t=g?t*-1:t,g=1-t,!_||!n?null:(r?(a=f(g*_.r+t*n.r),l=f(g*_.g+t*n.g),c=f(g*_.b+t*n.b)):(a=f((g*_.r**2+t*n.r**2)**.5),l=f((g*_.g**2+t*n.g**2)**.5),c=f((g*_.b**2+t*n.b**2)**.5)),d=_.a,n=n.a,_=d>=0||n>=0,d=_?d<0?n:n<0?d:d*g+n*t:0,o?"rgb"+(_?"a(":"(")+a+","+l+","+c+(_?","+f(d*1e3)/1e3:"")+")":"#"+(4294967296+a*16777216+l*65536+c*256+(_?f(d*255):0)).toString(16).slice(1,_?void 0:-2))}static pSBCr(t){let i,e,r,o;const a=parseInt,l=Math.round;let c=t.length;const n={r:0,g:0,b:0,a:0};if(c>9){if([i,e,r,o]=t.split(","),c=t.length,c<3||c>4)return null;n.r=a(i[3]=="a"?i.slice(5):i.slice(4)),n.g=a(e),n.b=a(r),n.a=o?parseFloat(o):-1}else{if(c==8||c==6||c<4)return null;c<6&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+(c>4?t[4]+t[4]:""));const d=a(t.slice(1),16);c==9||c==5?(n.r=d>>24&255,n.g=d>>16&255,n.b=d>>8&255,n.a=l((d&255)/.255)/1e3):(n.r=d>>16,n.g=d>>8&255,n.b=d&255,n.a=-1)}return n}}var b;(function(h){h[h.SLOW=0]="SLOW",h[h.NORMAL=1]="NORMAL",h[h.FAST=2]="FAST"})(b||(b={}));class u{}s(u,"ANGULAR_SPEED_NORMAL",Math.PI/2),s(u,"ANGULAR_SPEED_FAST",Math.PI),s(u,"ANGULAR_SPEED_SLOW",Math.PI/4),s(u,"HORIZONTAL_SPEED_NORMAL",55),s(u,"HORIZONTAL_SPEED_FAST",155),s(u,"HORIZONTAL_SPEED_SLOW",25);class W{static buildFluidLayersFromConfiguration(t,i){let e=u.ANGULAR_SPEED_NORMAL,r=u.HORIZONTAL_SPEED_NORMAL;const o=this.calculateFrequency(i);switch(t.horizontalSpeed){case 2:r=u.HORIZONTAL_SPEED_FAST;break;case 0:r=u.HORIZONTAL_SPEED_SLOW;break;default:r=u.HORIZONTAL_SPEED_NORMAL;break}switch(t.waveSpeed){case 2:e=u.ANGULAR_SPEED_FAST;break;case 0:e=u.ANGULAR_SPEED_SLOW;break;default:e=u.ANGULAR_SPEED_NORMAL;break}const a=m.pSBC(-.75,t.color||"#ffffff"),l=this.calculateWaveAmplitude(i),c={angle:0,horizontalPosition:0,color:t.color||"#ffffff",frequency:o,waveAmplitude:l,horizontalSpeed:r,waveSpeed:e};return[{angle:0,horizontalPosition:0,color:a||t.color||"#ffffff",frequency:o,waveAmplitude:l,horizontalSpeed:-r,waveSpeed:e},c]}static calculateWaveAmplitude(t){return t*.021}static calculateFrequency(t){return t/11}}const O={initialProgress:0,borderWidth:[{resolution:0,value:10},{resolution:768,value:15},{resolution:1440,value:30}],borderColor:"#75758b",padding:30,backgroundColor:"#9f9fae",showProgress:!0,showBubbles:!0,bubbleColor:"#ffffff",textColor:"#ffffff",textDropShadow:!0,fontFamily:"Arial",fontSize:[{resolution:0,value:13},{resolution:320,value:30},{resolution:718,value:90},{resolution:1440,value:95}],use3D:!0,dropShadow:!0,progressFormatter:h=>Math.round(h).toString(),fluidConfiguration:{color:"#ff0000",waveSpeed:b.NORMAL,horizontalSpeed:b.NORMAL}},y=(h,t)=>{var e,r;if(!t.length)return 0;const i=(r=(e=t.filter(o=>o.resolution<=h))==null?void 0:e.sort(D))==null?void 0:r[0];if(i)return i.value;{const o=t.sort(D).reverse()[0];return o?o.value:0}},D=(h,t)=>h.resolution<t.resolution?1:h.resolution>t.resolution?-1:0;class k extends A{constructor(t,i){super(t);s(this,"_fluidConfiguration");s(this,"_layers");s(this,"_bubbles",new z);s(this,"_meterDiameter",0);s(this,"_targetProgress");s(this,"_progress");s(this,"_calculatedBorderWidth",0);s(this,"_borderWidth");s(this,"_borderColor","#ff00ff");s(this,"_padding",15);s(this,"_backgroundColor","#ff00ff");s(this,"_textColor","");s(this,"_fontFamily","Arial");s(this,"_calculatedFontSize",0);s(this,"_fontSize");s(this,"_textDropShadow",!0);s(this,"_showProgress",!0);s(this,"_showBubbles",!0);s(this,"_bubbleColor","#ffffff");s(this,"_use3D",!0);s(this,"_dropShadow",!0);s(this,"_progressFormatter",t=>`${t}%`);const e=S(S({},O),i);this._borderWidth=e.borderWidth,this._borderColor=e.borderColor,this._padding=e.padding,this._progress=e.initialProgress,this._targetProgress=this._progress,this._backgroundColor=e.backgroundColor,this._fluidConfiguration=e.fluidConfiguration,this._textColor=e.textColor,this._textDropShadow=e.textDropShadow,this._showProgress=e.showProgress,this._fontFamily=e.fontFamily,this._fontSize=e.fontSize,this._showBubbles=e.showBubbles,this._bubbleColor=e.bubbleColor,this._use3D=e.use3D,this._dropShadow=e.dropShadow,this._progressFormatter=e.progressFormatter,this.calculateDrawingValues()}get progress(){return this._progress}set progress(t){this._targetProgress=t}get borderWidth(){return this._borderWidth}set borderWidth(t){this._borderWidth=t,this.calculateDrawingValues()}get borderColor(){return this._borderColor}set borderColor(t){this._borderColor=t}get meterPadding(){return this._padding}set meterPadding(t){this._padding=t,this.calculateDrawingValues()}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){this._backgroundColor=t}get textColor(){return this._textColor}set textColor(t){this._textColor=t}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t}get textDropShadow(){return this._textDropShadow}set textDropShadow(t){this._textDropShadow=t}get showProgress(){return this._showProgress}set showProgress(t){this._showProgress=t}get showBubbles(){return this._showBubbles}set showBubbles(t){this._showBubbles=t}get bubbleColor(){return this._bubbleColor}set bubbleColor(t){this._bubbleColor=t}get use3D(){return this._use3D}set use3D(t){this._use3D=t}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow=t}set progressFormatter(t){this._progressFormatter=t}draw(){this.clear(),this._dropShadow&&(this._context.save(),this._context.beginPath(),this._context.filter="drop-shadow(0px 4px 6px rgba(0,0,0,0.45))",this._context.arc(this._width/2,this._height/2,this._meterDiameter/2-1,0,2*Math.PI),this._context.closePath(),this._context.fill(),this._context.restore()),this.drawBackground(),this._context.save(),this._context.arc(this._width/2,this._height/2,this._meterDiameter/2-this._calculatedBorderWidth,0,Math.PI*2),this._context.clip(),this._layers&&(this.drawLayer(this._layers[0],!1),this.drawLayer(this._layers[1])),this._showBubbles&&this.drawBubbles(),this._showProgress&&this.drawText(),this._context.restore(),this.drawForeground()}clear(){this._context.clearRect(0,0,this._width,this._height)}calculateDrawingValues(){this._meterDiameter=this.calculateMeterDiameter(),this._layers=W.buildFluidLayersFromConfiguration(this._fluidConfiguration,this._meterDiameter);const t=window.innerWidth;typeof this._borderWidth=="number"?this._calculatedBorderWidth=this._borderWidth:this._calculatedBorderWidth=y(t,this._borderWidth),typeof this._fontSize=="number"?this._calculatedFontSize=this._fontSize:this._calculatedFontSize=y(t,this._fontSize),this.updateBubbleLayer(),this._bubbles.reset()}updateBubbleLayer(){const t=this.getMeterBottomLimit();let i=this.getFluidLevel();this._layers&&(i+=this._layers[0].waveAmplitude);let e=t*.85;e<i&&(e=i);const r=t,o=this._width/2-this._meterDiameter/2,a=this._width/2+this._meterDiameter/2;this._bubbles.minY=e,this._bubbles.maxY=r,this._bubbles.minX=o,this._bubbles.maxX=a,this._bubbles.yThreshold=i,this._bubbles.averageSize=this._meterDiameter*.006,this._bubbles.averageSpeed=this._meterDiameter*2/14,this._bubbles.speedDeviation=this._bubbles.averageSpeed*.25}getMeterBottomLimit(){return this._height-(this._height-this._meterDiameter)/2}getFluidLevel(){const t=this._meterDiameter*this._progress/100;return this.getMeterBottomLimit()-t}drawLayer(t,i=!0){let e=t.angle+t.waveSpeed*this._elapsed;e>Math.PI*2&&(e=e-Math.PI*2),t.angle=e,t.horizontalPosition+=t.horizontalSpeed*this._elapsed;let r=0,o=0;const a=t.waveAmplitude*Math.sin(t.angle),l=this.getMeterBottomLimit(),c=this.getFluidLevel();for(this._progress<this._targetProgress?(this._progress+=15*this._elapsed,this._progress>this._targetProgress&&(this._progress=this._targetProgress),this.updateBubbleLayer()):this._progress>this._targetProgress&&(this._progress-=15*this._elapsed,this._progress<this._targetProgress&&(this._progress=this._targetProgress),this.updateBubbleLayer()),this._context.save(),this._context.beginPath(),this._context.lineTo(0,c);r<this._width;)o=c+a*Math.sin((r+t.horizontalPosition)/t.frequency),this._context.lineTo(r,o),r++;if(this._context.lineTo(r,this._height),this._context.lineTo(0,this._height),this._context.closePath(),this._use3D&&i){const n=this._width/2,d=l,g=this._meterDiameter*.01,_=this._context.createRadialGradient(n,d,g,n,d,this._meterDiameter*.45),f=t.color,C=m.pSBC(-.8,t.color);_.addColorStop(0,f),C&&_.addColorStop(1,C),this._context.fillStyle=_}else this._context.fillStyle=t.color;this._context.fill(),this._context.restore()}drawText(){const t=this._progressFormatter(this._progress);this._context.save(),this._context.font=`${this._calculatedFontSize}px ${this._fontFamily}`,this._context.fillStyle=this._textColor,this._context.textAlign="center",this._context.textBaseline="middle",this._textDropShadow&&(this._context.filter="drop-shadow(0px 0px 5px rgba(0,0,0,0.4))"),this._context.fillText(t,this._width/2,this._height/2),this._context.restore()}drawBackground(){if(this._context.save(),this._context.beginPath(),this._context.arc(this._width/2,this._height/2,this._meterDiameter/2-this._calculatedBorderWidth,0,2*Math.PI),this._context.closePath(),this._use3D){const t=this._width/2,i=this._height/2,e=this._meterDiameter*.1,r=this._context.createRadialGradient(t,i,e,t,i,this._meterDiameter*.75),o=this._backgroundColor,a=m.pSBC(-.8,this.backgroundColor);r.addColorStop(0,o),a&&r.addColorStop(.9,a),this._context.fillStyle=r}else this._context.fillStyle=this.backgroundColor;this._context.fill(),this._context.restore()}drawForeground(){this._context.save(),this._context.lineWidth=this._calculatedBorderWidth,this._context.strokeStyle=this._borderColor,this._context.beginPath(),this._context.arc(this._width/2,this._height/2,this._meterDiameter/2-this._calculatedBorderWidth/2,0,2*Math.PI),this._context.closePath(),this._context.stroke();const t=m.pSBC(-.35,this._borderColor),i=this._calculatedBorderWidth*.25;this._context.lineWidth=i,this._context.strokeStyle=t||this._borderColor,this._context.beginPath(),this._context.arc(this._width/2,this._height/2,this._meterDiameter/2-this._calculatedBorderWidth*.85-i/2,0,2*Math.PI),this._context.closePath(),this._context.stroke();const e=m.pSBC(.05,this._borderColor),r=this._calculatedBorderWidth*.15;if(this._context.lineWidth=r,this._context.strokeStyle=e||this._borderColor,this._context.beginPath(),this._context.arc(this._width/2,this._height/2,this._meterDiameter/2-r/2,0,2*Math.PI),this._context.closePath(),this._context.stroke(),this._context.restore(),this._use3D){this._context.save(),this._context.filter="blur(10px) blur(15px) opacity(0.65)";let o=this._width/2-this._meterDiameter/6,a=this._height/2-this._meterDiameter/6,l=this._meterDiameter*.095;this._context.fillStyle="white",this._context.beginPath(),this._context.arc(o,a,l,0,2*Math.PI),this._context.closePath(),this._context.fill(),this._context.restore(),this._context.save(),this._context.filter="blur(8px)  opacity(0.39)",o=this._width/2+this._meterDiameter/4.3,a=this._height/2+this._meterDiameter/4.3,l=this._meterDiameter*.045,this._context.fillStyle="white",this._context.beginPath(),this._context.arc(o,a,l,0,2*Math.PI),this._context.closePath(),this._context.fill(),this._context.restore()}}drawBubbles(){this._context.save(),this._bubbles.bubbles.forEach(t=>{t.update(this._elapsed),(t.isDead||t.y<this._bubbles.yThreshold)&&this._bubbles.resetBubble(t),this._context.beginPath(),this._context.strokeStyle=this._bubbleColor,this._context.arc(t.x-t.currentRadius/2,t.y-t.currentRadius/2,t.currentRadius,0,2*Math.PI),this._context.filter=`opacity(${t.currentOpacity})`,this._context.stroke(),this._context.closePath()}),this._context.restore()}calculateMeterDiameter(){return this._width>=this._height?this._height-this._padding:this._width-this._padding}resize(){super.resize(),this.calculateDrawingValues(),this._bubbles.reset()}}const p=[];p.push({borderWidth:22,initialProgress:75,backgroundColor:"#002d59",borderColor:"#3e4954",bubbleColor:"#6bcfff",fontFamily:"Codystar",fontSize:34,progressFormatter:h=>`${h.toFixed(0)}cm\xB2`,fluidConfiguration:{color:"#1e90ff"}});p.push({borderColor:"#567656",initialProgress:45,backgroundColor:"#2d3d2d",textColor:"#80cd32",fontFamily:"Creepster",progressFormatter:h=>h>50?h.toFixed(1)+"!":h.toFixed(1),fluidConfiguration:{color:"#adff2f",horizontalSpeed:b.FAST,waveSpeed:b.FAST}});p.push({initialProgress:66,borderColor:"#2a2a2a",backgroundColor:"#270100",showBubbles:!1,borderWidth:45,fontSize:27,progressFormatter:h=>h.toFixed(2)+"%",fluidConfiguration:{color:"#ff4500",horizontalSpeed:b.SLOW,waveSpeed:b.SLOW}});p.push({initialProgress:25,borderColor:"#dadada",backgroundColor:"#dadada",showBubbles:!0,borderWidth:22,dropShadow:!1,padding:0,fontSize:65,fluidConfiguration:{color:"#800080"}});p.push({borderWidth:22,initialProgress:23.2,padding:50,use3D:!1,fontFamily:"Shizuru",backgroundColor:"#002d59",borderColor:"#3e4954",bubbleColor:"#6bcfff",fontSize:60,progressFormatter:h=>h.toFixed(1)+"%",fluidConfiguration:{color:"#1e90ff",horizontalSpeed:b.FAST,waveSpeed:b.FAST}});p.push({borderWidth:22,initialProgress:62,padding:50,backgroundColor:"#208000",borderColor:"#800060",showProgress:!1,showBubbles:!1,dropShadow:!1,use3D:!1,fluidConfiguration:{color:"#f8f8ff"}});const E=document.querySelector(".meters");p.forEach(h=>{const t=document.createElement("div");t.classList.add("meter-container"),E.appendChild(t);const i=document.createElement("div");i.classList.add("meter"),t.appendChild(i);const e=new k(i,h),r=document.createElement("div");r.classList.add("controls");const o=document.createElement("input");o.setAttribute("type","number"),o.setAttribute("placeholder","change progress");const a=document.createElement("button");a.innerHTML="set",a==null||a.addEventListener("click",()=>{const l=Number(o==null?void 0:o.value);l&&(isNaN(l)&&alert("invalid progress. Number between 0 and 100"),(l<0||l>100)&&alert("invalid progress. Number between 0 and 100"),e.progress=l)}),r.appendChild(o),r.appendChild(a),t.appendChild(r)});
